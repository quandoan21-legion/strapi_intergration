"use strict";(self.webpackChunktech_events_strapi=self.webpackChunktech_events_strapi||[]).push([[3533],{22185(x,m,t){t.d(m,{T:()=>V});var s=t(92132),i=t(21272),h=t(94061),U=t(88353),g=t(83997),I=t(25641),o=t(90361),r=t(33363),a=t(30893),l=t(21610),e=t(55506),B=t(83925),K=t(41909),C=t(50612),W=t(54894),z=t(71389),u=t(17703),F=t(47610);const V=({permissions:n,headers:d=[],contentType:D,isLoading:T=!1,tokens:P=[],onConfirmDelete:M,tokenType:E})=>{const{canDelete:L,canUpdate:O,canRead:y}=n;return(0,s.jsx)(e.Ee,{headers:d,contentType:D,rows:P,withBulkActions:L||O||y,isLoading:T,onConfirmDelete:M,children:(0,s.jsx)(Y,{tokenType:E,permissions:n,onConfirmDelete:M})})},Y=({tokenType:n,permissions:d,rows:D=[],withBulkActions:T,onConfirmDelete:P})=>{const{canDelete:M,canUpdate:E,canRead:L}=d,[{query:O}]=(0,e.sq)(),{formatMessage:y}=(0,W.A)(),[,Z]=O&&O.sort?O.sort.split(":"):[void 0,"ASC"],{push:w,location:{pathname:b}}=(0,u.W6)(),{trackUsage:q}=(0,e.z1)(),tt=[...D].sort((_,st)=>{const S=_.name.localeCompare(st.name);return Z==="DESC"?-S:S});return(0,s.jsx)(I.N,{children:tt.map(_=>(0,s.jsxs)(o.Tr,{...(0,e.qM)({fn(){q("willEditTokenFromList",{tokenType:n}),w(`${b}/${_.id}`)},condition:E}),children:[(0,s.jsx)(r.Td,{maxWidth:(0,e.a8)(250),children:(0,s.jsx)(a.o,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0,children:_.name})}),(0,s.jsx)(r.Td,{maxWidth:(0,e.a8)(250),children:(0,s.jsx)(a.o,{textColor:"neutral800",ellipsis:!0,children:_.description})}),(0,s.jsx)(r.Td,{children:(0,s.jsx)(a.o,{textColor:"neutral800",children:(0,s.jsx)(e.sR,{timestamp:new Date(_.createdAt)})})}),(0,s.jsx)(r.Td,{children:_.lastUsedAt&&(0,s.jsx)(a.o,{textColor:"neutral800",children:(0,s.jsx)(e.sR,{timestamp:new Date(_.lastUsedAt),customIntervals:[{unit:"hours",threshold:1,text:y({id:"Settings.apiTokens.lastHour",defaultMessage:"last hour"})}]})})}),T&&(0,s.jsx)(r.Td,{children:(0,s.jsxs)(g.s,{justifyContent:"end",children:[E&&(0,s.jsx)(X,{tokenName:_.name,tokenId:_.id}),!E&&L&&(0,s.jsx)(J,{tokenName:_.name,tokenId:_.id}),M&&(0,s.jsx)(H,{tokenName:_.name,onClickDelete:()=>P?.(_.id),tokenType:n})]})})]},_.id))})},Q={edit:{id:"app.component.table.edit",defaultMessage:"Edit {target}"},read:{id:"app.component.table.read",defaultMessage:"Read {target}"}},p=({tokenName:n,tokenId:d,buttonType:D="edit",children:T})=>{const{formatMessage:P}=(0,W.A)(),{location:{pathname:M}}=(0,u.W6)();return(0,s.jsx)(G,{forwardedAs:z.k2,to:`${M}/${d}`,title:P(Q[D],{target:n}),children:T})},G=(0,F.Ay)(l.N)`
  svg {
    path {
      fill: ${({theme:n})=>n.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:n})=>n.colors.neutral800};
      }
    }
  }
`,H=({tokenName:n,onClickDelete:d,tokenType:D})=>{const{formatMessage:T}=(0,W.A)(),{trackUsage:P}=(0,e.z1)(),[M,E]=i.useState(!1),L=()=>{E(!1),P("willDeleteToken",{tokenType:D}),d()};return(0,s.jsxs)(h.a,{paddingLeft:1,onClick:O=>O.stopPropagation(),children:[(0,s.jsx)(U.K,{onClick:()=>{E(!0)},label:T({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${n}`}),name:"delete",borderWidth:0,icon:(0,s.jsx)(C.A,{})}),(0,s.jsx)(e.TM,{onToggleDialog:()=>E(!1),onConfirm:L,isOpen:M})]})},J=({tokenName:n,tokenId:d})=>(0,s.jsx)(p,{tokenName:n,tokenId:d,buttonType:"read",children:(0,s.jsx)(B.A,{})}),X=({tokenName:n,tokenId:d})=>(0,s.jsx)(p,{tokenName:n,tokenId:d,children:(0,s.jsx)(K.A,{width:12})})},24210(x,m,t){t.d(m,{a:()=>g,b:()=>o,c:()=>h,d:()=>I,u:()=>U});var s=t(82688);const i=s.n.injectEndpoints({endpoints:r=>({getTransferTokens:r.query({query:()=>({url:"/admin/transfer/tokens",method:"GET"}),transformResponse:a=>a.data,providesTags:(a,l)=>[...a?.map(({id:e})=>({type:"TransferToken",id:e}))??[],{type:"TransferToken",id:"LIST"}]}),getTransferToken:r.query({query:a=>`/admin/transfer/tokens/${a}`,transformResponse:a=>a.data,providesTags:(a,l,e)=>[{type:"TransferToken",id:e}]}),createTransferToken:r.mutation({query:a=>({url:"/admin/transfer/tokens",method:"POST",data:a}),transformResponse:a=>a.data,invalidatesTags:[{type:"TransferToken",id:"LIST"}]}),deleteTransferToken:r.mutation({query:a=>({url:`/admin/transfer/tokens/${a}`,method:"DELETE"}),transformResponse:a=>a.data,invalidatesTags:(a,l,e)=>[{type:"TransferToken",id:e}]}),updateTransferToken:r.mutation({query:({id:a,...l})=>({url:`/admin/transfer/tokens/${a}`,method:"PUT",data:l}),transformResponse:a=>a.data,invalidatesTags:(a,l,{id:e})=>[{type:"TransferToken",id:e}]})}),overrideExisting:!1}),{useGetTransferTokensQuery:h,useGetTransferTokenQuery:U,useCreateTransferTokenMutation:g,useDeleteTransferTokenMutation:I,useUpdateTransferTokenMutation:o}=i},95914(x,m,t){t.d(m,{ProtectedListView:()=>rt});var s=t(92132),i=t(21272),h=t(4198),U=t(55356),g=t(25815),I=t(38413),o=t(55506),r=t(5194),a=t(5409),l=t(54894),e=t(17703),B=t(82688),K=t(24210),C=t(99831),W=t(22185),z=t(15126),u=t(63299),F=t(67014),V=t(59080),Y=t(79275),Q=t(14718),p=t(82437),G=t(61535),H=t(5790),J=t(12083),X=t(35223),n=t(74930),d=t(2600),D=t(48940),T=t(41286),P=t(56336),M=t(13426),E=t(84624),L=t(77965),O=t(54257),y=t(71210),Z=t(51187),w=t(39404),b=t(58692),q=t(501),tt=t(57646),_=t(23120),st=t(44414),S=t(25962),Ot=t(14664),mt=t(42588),At=t(90325),ft=t(62785),ct=t(87443),gt=t(41032),Ct=t(22957),Lt=t(93179),vt=t(73055),Rt=t(15747),ht=t(85306),Ut=t(26509),It=t(32058),Bt=t(81185),Wt=t(82261);const _t=[{name:"name",key:"name",metadatas:{label:{id:"Settings.tokens.ListView.headers.name",defaultMessage:"Name"},sortable:!0}},{name:"description",key:"description",metadatas:{label:{id:"Settings.tokens.ListView.headers.description",defaultMessage:"Description"},sortable:!1}},{name:"createdAt",key:"createdAt",metadatas:{label:{id:"Settings.tokens.ListView.headers.createdAt",defaultMessage:"Created at"},sortable:!1}},{name:"lastUsedAt",key:"lastUsedAt",metadatas:{label:{id:"Settings.tokens.ListView.headers.lastUsedAt",defaultMessage:"Last used"},sortable:!1}}],ot=()=>{(0,o.L4)();const{formatMessage:A}=(0,l.A)(),v=(0,o.hN)(),dt=(0,B.j)(c=>c.admin_app.permissions.settings?.["transfer-tokens"]),{isLoading:Et,allowedActions:{canCreate:k,canDelete:it,canUpdate:lt,canRead:R}}=(0,o.ec)(dt),{push:at}=(0,e.W6)(),{trackUsage:j}=(0,o.z1)(),{_unstableFormatAPIError:N}=(0,o.wq)();i.useEffect(()=>{at({search:a.stringify({sort:"name:ASC"},{encode:!1})})},[at]),(0,B.b)(()=>{j("willAccessTokenList",{tokenType:C.T})});const Mt=_t.map(c=>({...c,metadatas:{...c.metadatas,label:A(c.metadatas.label)}})),{data:f=[],isLoading:Dt,error:$}=(0,K.c)(void 0,{skip:!R});i.useEffect(()=>{f&&j("didAccessTokenList",{number:f.length,tokenType:C.T})},[j,f]),i.useEffect(()=>{$&&v({type:"warning",message:N($)})},[$,N,v]);const[Tt]=(0,K.d)(),Pt=async c=>{try{const nt=await Tt(c);"error"in nt&&v({type:"warning",message:N(nt.error)})}catch{v({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},et=Dt||Et;return(0,s.jsxs)(I.g,{"aria-busy":et,children:[(0,s.jsx)(o.x7,{name:"Transfer Tokens"}),(0,s.jsx)(U.Q,{title:A({id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"}),subtitle:A({id:"Settings.transferTokens.description",defaultMessage:'"List of generated transfer tokens"'}),primaryAction:k?(0,s.jsx)(g.z,{"data-testid":"create-transfer-token-button",startIcon:(0,s.jsx)(r.A,{}),size:"S",onClick:()=>j("willAddTokenFromList",{tokenType:C.T}),to:"/settings/transfer-tokens/create",children:A({id:"Settings.transferTokens.create",defaultMessage:"Create new Transfer Token"})}):void 0}),(0,s.jsxs)(h.s,{children:[!R&&(0,s.jsx)(o.UW,{}),R&&f.length>0&&(0,s.jsx)(W.T,{permissions:{canRead:R,canDelete:it,canUpdate:lt},headers:Mt,contentType:"trasfer-tokens",isLoading:et,onConfirmDelete:Pt,tokens:f,tokenType:C.T}),R&&k&&f.length===0&&(0,s.jsx)(o.R1,{content:{id:"Settings.transferTokens.addFirstToken",defaultMessage:"Add your first Transfer Token"},action:(0,s.jsx)(g.z,{variant:"secondary",startIcon:(0,s.jsx)(r.A,{}),to:"/settings/transfer-tokens/create",children:A({id:"Settings.transferTokens.addNewToken",defaultMessage:"Add new Transfer Token"})})}),R&&!k&&f.length===0&&(0,s.jsx)(o.R1,{content:{id:"Settings.transferTokens.emptyStateLayout",defaultMessage:"You don\u2019t have any content yet..."}})]})]})},rt=()=>{const A=(0,B.j)(v=>v.admin_app.permissions.settings?.["transfer-tokens"].main);return(0,s.jsx)(o.kz,{permissions:A,children:(0,s.jsx)(ot,{})})}},99831(x,m,t){t.d(m,{A:()=>s,T:()=>i});const s="api-token",i="transfer-token"}}]);
